name       : puzzles
version    : '20180227'
release    : 1
source     :
    - https://www.chiark.greenend.org.uk/~sgtatham/puzzles/puzzles-20180227.2adf005.tar.gz : 18000514c7e7e6123fbe1d0de0a23ef86d64c46abd5026b24b8c3e330dab8ebe
license    : MIT
component  : games.puzzle
summary    : Simon Tatham's Portable Puzzle Collection
description: "This is a collection of small desktop toys, little games that you can \npop up in a window and play for two or three minutes while you take a \nbreak from whatever else you were doing.\n"
builddeps  :
    - pkgconfig(gtk+-3.0)
setup      : |
    %patch -p1 < $pkgfiles/0001-Use-gdk_display_beep-in-place-of-obsolete-gdk_beep.patch

    %configure
build      : |
    %make
install    : |
    %make_install

    for f in $installdir/usr/bin/*; do
        name=`basename $f`
        pzname=puzzle-$name

        # Some names are too generic
        mv $f $installdir/usr/bin/$pzname

        sed -e "s|<NAME>|${name^}|g; s|<PZNAME>|$pzname|g" $pkgfiles/template.desktop > $pzname.desktop
        install -D -m00644 $pzname.desktop $installdir/usr/share/applications/$pzname.desktop

        install -D -m00644 icons/$name-48d24.png $installdir/usr/share/icons/hicolor/48x48/apps/$pzname.png
    done
